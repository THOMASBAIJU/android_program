Experiment 9: " Full-Featured Calculator with Layout Design â€œ

Objective: To learn how to build a complete, working calculator combining arithmetic logic with advanced layout techniques using GridLayout and LinearLayout.

Question: Build a complete calculator app. Design its entire screen using GridLayout for all the number buttons (0-9) and operation buttons (+, -, *, /, equals, clear). Use a LinearLayout for the display area at the top where numbers are typed and results are shown. Make sure the calculator can perform all basic math operations correctly, and displays the answers in the top display area.

------------------------------------------------------------------------------------------------

MainActivity.java
package com.example.myapplication;

import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;

import androidx.appcompat.app.AppCompatActivity;

public class MainActivity extends AppCompatActivity {

    TextView result;
    StringBuilder input = new StringBuilder();
    Double first = null;
    String op = "";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        result = findViewById(R.id.result);
        result.setText("0");
    }

    public void numClick(View v){
        String t = ((Button)v).getText().toString();

        if(t.equals(".") && input.toString().contains(".")) return;

        if(input.toString().equals("0") && !t.equals(".")) input.setLength(0);

        input.append(t);
        result.setText(input.toString());
    }

    public void opClick(View v){
        if(input.length()==0) return;
        first = Double.parseDouble(input.toString());
        op = ((Button)v).getText().toString();
        input.setLength(0);
    }

    public void equalClick(View v){
        if(first == null || input.length()==0) return;
        double second = Double.parseDouble(input.toString());
        double res = 0;

        switch(op){
            case "+": res = first + second; break;
            case "-": res = first - second; break;
            case "*": res = first * second; break;
            case "/":
                if(second==0){
                    result.setText("Error");
                    input.setLength(0);
                    first=null;
                    op="";
                    return;
                }
                res = first / second;
                break;
        }
        String out = (res == (int)res) ? String.valueOf((int)res) : String.valueOf(res);
        result.setText(out);
        input.setLength(0);
        input.append(out);
        first = null;
        op = "";
    }
    public void clearClick(View v){
        input.setLength(0);
        result.setText("0");
        first=null;
        op="";
    }
}
------------------------------------------------------------------------------------------------

activity_main.xml

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:padding="8dp"
    tools:context=".MainActivity">


    <TextView
        android:id="@+id/result"
        android:layout_width="match_parent"
        android:layout_height="500dp"
        android:maxLines="1"
        android:text="0"
        android:textSize="60sp"
        android:gravity="bottom|end" />


    <GridLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:columnCount="4"
        android:rowCount="5"
        android:useDefaultMargins="true"
        android:padding="12dp">

        <Button
            android:id="@+id/buttonClear"
            android:text="C"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_columnWeight="1"
            android:onClick="clearClick"/>

        <Button
            android:id="@+id/buttonDivide"
            android:text="/"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_columnWeight="1"
            android:onClick="opClick"/>

        <Button
            android:id="@+id/buttonMultiply"
            android:text="*"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_columnWeight="1"
            android:onClick="opClick"/>

        <Button
            android:id="@+id/buttonSubtract"
            android:text="-"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_columnWeight="1"
            android:onClick="opClick"/>

        <Button
            android:id="@+id/button7"
            android:text="7"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_columnWeight="1"
            android:onClick="numClick"/>
        <Button
            android:id="@+id/button8"
            android:text="8"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_columnWeight="1"
            android:onClick="numClick"/>
        <Button
            android:id="@+id/button9"
            android:text="9"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_columnWeight="1"
            android:onClick="numClick"/>

        <Button
            android:id="@+id/buttonAdd"
            android:text="+"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_rowSpan="2"
            android:layout_gravity="fill_vertical"
            android:layout_columnWeight="1"
            android:onClick="opClick"/>

        <Button
            android:id="@+id/button4"
            android:text="4"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_columnWeight="1"
            android:onClick="numClick"/>

        <Button
            android:id="@+id/button5"
            android:text="5"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_columnWeight="1"
            android:onClick="numClick"/>

        <Button
            android:id="@+id/button6"
            android:text="6"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_columnWeight="1"
            android:onClick="numClick"/>

        <Button
            android:id="@+id/button1"
            android:text="1"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_columnWeight="1"
            android:onClick="numClick"/>

        <Button
            android:id="@+id/button2"
            android:text="2"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_columnWeight="1"
            android:onClick="numClick"/>
        <Button
            android:id="@+id/button3"
            android:text="3"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_columnWeight="1"
            android:onClick="numClick"/>

        <Button
            android:id="@+id/buttonEquals"
            android:text="="
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_rowSpan="2"
            android:layout_gravity="fill_vertical"
            android:layout_columnWeight="1"
            android:onClick="equalClick"/>

        <Button
            android:id="@+id/button0"
            android:text="0"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_columnSpan="2"
            android:layout_gravity="fill_horizontal"
            android:layout_columnWeight="1"
            android:onClick="numClick"/>

        <Button
            android:id="@+id/buttonDot"
            android:text="."
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_columnWeight="1"
            android:onClick="numClick"/>
    </GridLayout>
</LinearLayout>
